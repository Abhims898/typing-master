const quotes = {
  easy: [
    "Typing is a useful skill that helps you write quickly and clearly.",
    "Practice every day to improve your typing speed and accuracy.",
    "Use all your fingers to type instead of just two or three.",
    "Good posture and proper hand placement improve typing performance.",
    "Stay calm and focused while typing to avoid making mistakes.",
    "Learning to type can help students complete their homework faster.",
    "Typing without looking at the keyboard is called touch typing.",
    "It is important to take breaks while typing to avoid strain.",
    "Kids can also benefit from learning typing at an early age.",
    "Typing games make learning fun and interactive.",
    "Speed and accuracy are both important in a typing test.",
    "Repetition helps your fingers remember key positions.",
    "Try not to backspace too much while practicing.",
    "Use online tools to track your typing progress.",
    "Reading while typing helps you stay focused.",
    "A quiet environment can help you type better.",
    "Listening to soft music may improve your rhythm while typing.",
    "Typing practice can be done anytime and anywhere.",
    "Accuracy matters more than speed when you begin.",
    "Don't rush while learning to type.",
    "Set small goals like five-minute practice sessions.",
    "Improve typing with fun exercises and lessons.",
    "Typing helps you express your ideas faster.",
    "Stay relaxed and type with confidence.",
    "Always sit upright while typing for best results.",
    "Typing boosts your confidence in writing tasks.",
    "Use typing apps to make learning more interesting.",
    "Typing skills are useful in many jobs today.",
    "Try typing with both hands evenly.",
    "Watch your fingers and keyboard at first, then try without.",
    "Challenge yourself with daily typing targets.",
    "Ask friends to take typing tests with you.",
    "Make sure your chair and desk are at the right height.",
    "Use a comfortable keyboard for long practice sessions.",
    "Warm up your fingers before a long typing session.",
    "Try to keep your fingers close to the home row keys.",
    "Typing fluently helps with school assignments.",
    "Teachers appreciate neatly typed homework.",
    "Typing slowly and correctly is better than typing fast and wrong.",
    "Don't give up if you make mistakes.",
    "Mistakes are part of learning to type.",
    "Start with short words and build up to longer ones.",
    "Practice typing common sentences you use often.",
    "Read the sentence fully before typing.",
    "Avoid looking at the screen too much while typing.",
    "Proper lighting helps prevent eye strain while typing.",
    "Keep your keyboard clean for better performance.",
    "Celebrate your typing milestones with a reward.",
    "Typing is a life skill everyone should learn."
  ],
  medium: [
    "Consistent practice builds muscle memory, which leads to faster typing without looking at the keyboard.",
    "Many people underestimate the importance of typing skills in today's digital world.",
    "Typing is not just about speed, but also about reducing errors and maintaining a steady pace.",
    "Using online typing tools regularly can help you measure your progress and fix your weaknesses.",
    "Even professional coders and writers benefit from mastering touch typing.",
    "A well-developed typing skill is essential for productivity in academic and professional settings.",
    "Typing challenges often include punctuation, symbols, and case sensitivity to improve real-world accuracy.",
    "An average typist can reach 40 WPM, but with effort, 80+ WPM is achievable.",
    "Typing consistently for ten minutes a day can yield noticeable improvements within weeks.",
    "Modern jobs in administration, IT, and education require excellent typing speed.",
    "Touch typing involves using all ten fingers and developing muscle memory over time.",
    "Keyboard shortcuts are an extension of efficient typing and improve workflow.",
    "Frequent typing without breaks can cause fatigue or repetitive strain injuries.",
    "Students taking online exams or submitting reports benefit from fast and accurate typing.",
    "Typing speed is measured in words per minute, with accuracy as a major component.",
    "Advanced typing lessons introduce unusual words to challenge muscle memory.",
    "Bloggers, editors, and writers all depend on strong typing skills for success.",
    "Typing quickly while maintaining accuracy is an invaluable workplace skill.",
    "Auto-correct and spell-check tools should support, not replace, good typing habits.",
    "Gamified typing platforms encourage users to improve without losing interest.",
    "Typing under pressure tests your ability to maintain consistency.",
    "Using ergonomic keyboards can improve comfort and reduce errors.",
    "Typing without glancing at the keyboard improves your focus and flow.",
    "Online typing communities share tips, host competitions, and track progress.",
    "Typing drills can include copying news articles, stories, or quotes.",
    "Custom typing tests allow users to paste their own text to practice.",
    "Writing code also requires a strong command of the keyboard.",
    "Typing fluency helps students complete timed essays and exams more effectively.",
    "Typing is a form of brain and hand coordination that improves with patience.",
    "Maintaining a rhythm while typing keeps you engaged and productive.",
    "Teachers may use typing tests as part of digital literacy programs.",
    "Being able to type quickly allows you to record ideas before they fade.",
    "Frequent feedback during typing practice helps correct bad habits.",
    "Apps and games provide varied sentence structures for balanced practice.",
    "Typing can be meditative, reducing stress when done with flow and calm.",
    "Correct finger placement remains the foundation of good typing.",
    "Slow but accurate typing is better than fast but error-filled typing.",
    "Typing skills improve communication speed in chats and emails.",
    "Keyboarding is a fundamental skill for students and professionals alike.",
    "Self-paced typing programs allow learners to progress independently.",
    "Typing while listening can build transcription skills and focus.",
    "Reviewing typing stats helps identify areas needing improvement.",
    "Typing opens doors to freelance writing, blogging, and transcription jobs.",
    "Some tests use paragraphs rather than single lines to mimic real-world tasks.",
    "Typing involves pattern recognition and mental clarity.",
    "Typing assessments are part of many corporate screening processes.",
    "An accurate typist reduces the need for revisions and proofreading.",
    "Each keyboard layout (QWERTY, AZERTY, Dvorak) offers unique challenges."
  ],
  hard: [
    "Advanced typing tests require not only speed and accuracy but also cognitive endurance and error resilience.",
    "High-stakes environments like court reporting demand real-time typing under intense time pressure.",
    "Mastering keyboard layout familiarity allows for unconscious typing even with complex punctuation.",
    "Touch typing enables your mind to focus on ideas instead of character locations.",
    "The use of customized mechanical keyboards among enthusiasts boosts both comfort and performance.",
    "Typing long academic texts with accurate formatting is a test of concentration and consistency.",
    "Typing fluently in multilingual settings is essential for global professionals and translators.",
    "Speedwriting and shorthand are extreme forms of optimized input methods.",
    "Keyboard layout alternatives like Dvorak and Colemak claim improved ergonomics and faster learning curves.",
    "Sustaining a pace of 100+ WPM for extended periods is a mark of expert-level typists.",
    "Transcription roles require listening comprehension and high-speed typing under continuous audio feed.",
    "Programming interviews sometimes assess your ability to type, think, and debug in real-time.",
    "Medical and legal transcriptionists must learn to type domain-specific terminology accurately.",
    "The psychological component of typing includes managing stress and avoiding performance anxiety.",
    "Typing while multitasking (e.g., while on a call) is a skill many executives rely upon.",
    "Typing from dictation demands processing language and symbols almost simultaneously.",
    "Typing interfaces in augmented reality or VR settings present new challenges in motor control.",
    "Your words per minute rate may decline after 10 minutes unless you've trained endurance.",
    "Typing with a consistent rhythm improves neural and muscular coordination.",
    "Copy typing complex reports from PDF or paper sources builds focus and attention to detail.",
    "Advanced typists self-correct in real-time without breaking their typing flow.",
    "Mental fatigue during long sessions affects accuracy more than speed.",
    "Elite typists use predictive anticipation of keystrokes for seamless output.",
    "Speed typists are aware of their average character error per minute, not just words.",
    "Typing competitions include complex sentence structures to eliminate memorization advantage.",
    "Code typing involves precise spacing, indentation, and bracket management.",
    "Legal typing requires strict adherence to formal structure and citation format.",
    "Academic authors must format citations, equations, and footnotes without breaking typing flow.",
    "Typing analysis tools can identify fatigue patterns and suggest micro-breaks.",
    "Neural keyboards that adapt layout dynamically are under active research.",
    "AI-generated typing challenges are tailored to user error profiles for targeted training.",
    "Typing on touchscreen devices demands different tactile and visual strategies.",
    "Professional typing requires quick recovery from backspaces without loss of rhythm.",
    "Typing fluency enables ghostwriters to transcribe thoughts in real-time.",
    "Forensic typists document case records accurately under confidentiality constraints.",
    "Flight simulator typists input data swiftly in pre-defined navigation sequences.",
    "Typing real-time logs during emergency response training enhances crisis management.",
    "Typing metrics can be used in behavioral biometrics for user verification.",
    "AI-assisted typing helps people with disabilities achieve full-speed input.",
    "Typing sessions can be gamified with boss-level paragraph challenges.",
    "Typing performance is influenced by hydration, posture, and ambient noise.",
    "Typists sometimes visualize sentences in blocks for mental chunking.",
    "Typing in extreme conditions (e.g., submarines or research bases) tests adaptability.",
    "Typing with voice cues or auditory pacing is used in stenography practice.",
    "Multilingual typists must switch layout, grammar, and vocabulary rapidly.",
    "Data entry typists develop resilience to repetitive content.",
    "Typing games for the visually impaired rely on audio-based prompts."
  ]
};

let currentQuote = '';
let difficulty = 'easy';
let timeLimit = 60;
let startTime;
let timerInterval;
let scoreHistory = [];
let totalTypedWords = 0;
let totalTypedChars = 0;
let totalCorrectChars = 0;

const quoteElement = document.getElementById('quote');
const inputArea = document.getElementById('inputArea');
const timerElement = document.getElementById('timer');
const speedElement = document.getElementById('speed');
const accuracyElement = document.getElementById('accuracy');
const historyList = document.getElementById('historyList');
const startButton = document.getElementById('startButton');
const restartButton = document.getElementById('restartButton');
const difficultySelect = document.getElementById('difficulty');
const timeSelect = document.getElementById('timeLimit');

startButton.addEventListener('click', startTest);
restartButton.addEventListener('click', startTest);

function startTest() {
  quoteElement.innerHTML = '';
  inputArea.disabled = false;
  inputArea.value = '';
  inputArea.focus();
  scoreHistory = [];
  totalTypedWords = 0;
  totalTypedChars = 0;
  totalCorrectChars = 0;

  difficulty = difficultySelect.value;
  timeLimit = parseInt(timeSelect.value) * 60;
  startTime = Date.now();
  loadNewQuote();
  updateQuoteHighlight();
  restartButton.style.display = 'none';

  clearInterval(timerInterval);
  timerInterval = setInterval(updateTimer, 1000);
}

function updateTimer() {
  const elapsed = Math.floor((Date.now() - startTime) / 1000);
  timerElement.textContent = elapsed;

  if (elapsed >= timeLimit) {
    clearInterval(timerInterval);
    inputArea.disabled = true;
    calculateResult();
    restartButton.style.display = 'inline';
  } else {
    calculateLiveStats();
  }
}

function loadNewQuote() {
  const list = quotes[difficulty];
  currentQuote = list[Math.floor(Math.random() * list.length)];
  quoteElement.textContent = currentQuote;
  updateQuoteHighlight();
}

inputArea.addEventListener('input', () => {
  updateQuoteHighlight();

  const typed = inputArea.value.trim();
  const target = currentQuote.trim();

  if (typed === target) {
    totalTypedWords += typed.split(/\s+/).length;
    totalTypedChars += typed.length;
    totalCorrectChars += [...typed].filter((ch, i) => ch === target[i]).length;

    inputArea.value = '';
    loadNewQuote();
  }
});

function calculateLiveStats() {
  const elapsedMin = (Date.now() - startTime) / 60000;
  const wpm = Math.round(totalTypedWords / elapsedMin);
  const accuracy = totalTypedChars > 0
    ? Math.round((totalCorrectChars / totalTypedChars) * 100)
    : 100;

  speedElement.textContent = isFinite(wpm) ? wpm : 0;
  accuracyElement.textContent = accuracy;
}

function calculateResult() {
  calculateLiveStats();
  const entry = `Speed: ${speedElement.textContent} WPM | Accuracy: ${accuracyElement.textContent}% | Level: ${difficulty}`;
  scoreHistory.unshift(entry);
  updateHistory();
}

function updateHistory() {
  historyList.innerHTML = '';
  scoreHistory.slice(0, 5).forEach(score => {
    const li = document.createElement('li');
    li.textContent = score;
    historyList.appendChild(li);
  });
}

function updateQuoteHighlight() {
  const typed = inputArea.value;
  let result = '';
  for (let i = 0; i < currentQuote.length; i++) {
    if (i < typed.length) {
      result += `<span class="${typed[i] === currentQuote[i] ? 'correct' : 'incorrect'}">${currentQuote[i]}</span>`;
    } else {
      result += currentQuote[i];
    }
  }
  quoteElement.innerHTML = result;
}
